(function(n,l,u,a,v,h){"use strict";const{FormDivider:R,FormIcon:S,FormInput:i,FormRow:g}=v.Forms;function p(){return h.useProxy(a.storage),React.createElement(u.ReactNative.ScrollView,null,React.createElement(g,{label:"User ID"}),React.createElement(i,{placeholder:"Enter Target User ID",value:a.storage.targetUserId||"",onChange:function(e){return a.storage.targetUserId=e}}),React.createElement(R,null),React.createElement(g,{label:"Image URL"}),React.createElement(i,{placeholder:"Enter image URL",value:a.storage.imageUrl||"",onChange:function(e){return a.storage.imageUrl=e}}))}const t="[custom-avatars]";let s=[];function E(){console.log(`${t} loaded`);const e=a.storage.targetUserId,d=a.storage.imageUrl,U=l.findByStoreName("UserStore");if(!U){console.log(`${t} userStore not found`);return}const r=l.findByProps("getUserAvatarURL");if(!r){console.log(`${t} avatar module not found`);return}if(r.getUserAvatarSource){const o=r.getUserAvatarSource;r.getUserAvatarSource=function(...c){if(c[0]?.id===e){const m=o.apply(this,c);if(m)return{...m,uri:d}}return o.apply(this,c)},s.push(function(){r.getUserAvatarSource=o})}const f=r.getUserAvatarURL;r.getUserAvatarURL=function(...o){return o[0]?.id===e?d:f.apply(this,o)},s.push(function(){r.getUserAvatarURL=f}),console.log(`${t} patches applied`);try{u.FluxDispatcher.dispatch({type:"USER_UPDATE",user:U.getUser(e)}),console.log(`${t} ui refreshed`)}catch(o){console.log(`${t} could not trigger refresh:`,o.message)}}function A(){console.log(`${t} unloading...`),s.forEach(function(e){return e()}),s=[],console.log(`${t} unloaded`)}return n.onLoad=E,n.onUnload=A,n.settings=p,n})({},vendetta.metro,vendetta.metro.common,vendetta.plugin,vendetta.ui.components,vendetta.storage);
